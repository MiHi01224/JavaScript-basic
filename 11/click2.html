<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クリックゲームその2</title>
    <style>

        body{
            text-align: center;
        }

        .monster-all{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
        }

        .monster-all div{
            display: grid;
            grid-template-rows: subgrid;
            grid-row: span 3
        }

        .monster-all div p{
            font-size: 20px;
            font-weight: bold;
        }

        .monster-all div img{
            margin-left: auto;
            margin-right: auto;
        }

        .death{
            transform: rotate(45deg);
        }


    </style>
</head>

<body>
    <h1>click game</h1>
    <div class="monster-all">

    </div>

    <script>
        const monsters = [
            {
                name: "ピンクカバ",
                pic: "https://dotown.maeda-design-room.net/wp-content/uploads/2022/01/thing_hippo_02.png",
                hp: 10,
                clear: function(){
                    alert(`${this.name}を倒した！`);
                },
            },
            {
                name: "カマキリ",
                pic: "https://dotown.maeda-design-room.net/wp-content/uploads/2022/01/thing_mantis_01.png",
                hp: 6,
                clear: function () {
                    alert(`${this.name}を倒した！`);
                },
            },
            {
                name: "ゴリラ",
                pic: "https://dotown.maeda-design-room.net/wp-content/uploads/2022/01/thing_gorilla_01.png",
                hp: 8,
                clear: function () {
                    alert(`${this.name}を倒した！`);
                },
            },
        ];

        const monsterAll = document.querySelector(".monster-all");

        monsters.forEach((obj)=>{
            console.log(obj);
        });

        for(let i = 0; i < monsters.length; i += 1){
            const monster = document.createElement("div");
            monsterAll.append(monster);

            const name = document.createElement("p");
            name.textContent = monsters[i].name;
            monster.append(name);

            const pic = document.createElement("img");
            pic.setAttribute("src",monsters[i].pic);
            pic.setAttribute("width", 200);
            monster.append(pic);

            const hp = document.createElement("p");
            hp.textContent = `HP:${monsters[i].hp}`;
            monster.append(hp);

            pic.addEventListener('click', () => {
                if(monsters[i].hp > 0){
                    hp.textContent = `HP:${--monsters[i].hp}`;
                    if(monsters[i].hp == 0){
                        monsters[i].clear();
                        hp.style.color = `#ff0000`;
                        pic.classList.add("death");
                    }
                }
            });
        }

    </script>
</body>

</html>